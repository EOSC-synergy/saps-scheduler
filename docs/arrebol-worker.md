# Setting up Arrebol worker

The Worker is component is responsible to execute the tasks of SAPS workflow in cooperation with the Arrebol execution service. The output generated by the Worker is shared with the Archiver through a NFS file system. This document details the NFS configuration. To understand the Worker component installation, please follow the steps outlined [here](https://github.com/wesleymonte/worker-deployment). After that, proceed with the instructions below).

## NFS Client

To configure the NFS client, access the worker VM and follow the steps below.

### Dependencies

In an apt-based Linux distribution, enter the commands below to install NFS client with the following command:

```bash
sudo apt-get update
sudo apt-get install nfs-common
```

### Configure

The configuration includes mounting the NFS file system on the Worker host. To do this, use the name of the root folder `/nfs` **(there should not be another name for this folder)**.

```
sudo mkdir -p /nfs
sudo mount -t nfs <nfs-temp-storage-ip>:<nfs-temp-storage-path> /nfs
```

Where:
- **nfs-temp-storage-ip** is the IP of the host where the NFS server is running;
- **nfs-temp-storage-path** is the path of the exported directory by the NFS server as mentioned [here](https://github.com/ufcg-lsd/saps-engine/blob/develop/docs/archiver-install.md#temporary-storage)

### Test

On the NFS server host, run the following command:

```bash
touch <path-nfs-temp-storage>/test
```

Then, go to the Worker host and run this:
```
ls /nfs
```

If the empty file `test` was viewed by the worker, the sharing was successful.
